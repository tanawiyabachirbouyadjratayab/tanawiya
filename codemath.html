<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“Š ÙƒÙˆØ¯ ØªØ·Ø¨ÙŠÙ‚ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª - Java Code</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/java.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --dark: #1a1a1a;
            --light: #f8f9fa;
            --sidebar: #2c3e50;
            --border: #34495e;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 20px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-content {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 800px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .sidebar {
            background: var(--sidebar);
            color: white;
            padding: 0;
        }

        .sidebar-header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border);
        }

        .file-tree {
            padding: 15px;
        }

        .file-item {
            padding: 12px 15px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            border-right: 3px solid transparent;
        }

        .file-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-right-color: var(--secondary);
        }

        .file-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-right-color: var(--secondary);
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒÙˆØ¯ */
        .code-display {
            background: var(--light);
            display: flex;
            flex-direction: column;
        }

        .code-header {
            background: var(--dark);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border);
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .file-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .code-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒÙˆØ¯ */
        .code-area {
            flex: 1;
            background: #1e1e1e;
            overflow: auto;
            position: relative;
        }

        pre {
            margin: 0;
            padding: 25px;
            background: transparent !important;
            direction: ltr;
            text-align: left;
        }

        code {
            font-family: 'Courier New', Monaco, monospace;
            font-size: 13px;
            line-height: 1.4;
        }

        .hljs {
            background: transparent !important;
            padding: 0 !important;
        }

        /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ */
        .project-info {
            background: white;
            padding: 25px;
            border-top: 3px solid var(--border);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .info-card {
            background: var(--light);
            padding: 18px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }

        .info-card h4 {
            color: var(--primary);
            margin-bottom: 8px;
        }

        /* Ø§Ù„ÙÙˆØªØ± */
        .footer {
            background: var(--dark);
            color: white;
            text-align: center;
            padding: 20px;
        }

        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tabs {
            display: flex;
            background: var(--dark);
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            color: #ccc;
        }

        .tab.active {
            border-bottom-color: var(--secondary);
            color: white;
        }

        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙƒÙˆØ¯ */
        .code-stats {
            background: #2d2d2d;
            color: white;
            padding: 12px 30px;
            display: flex;
            gap: 25px;
            font-size: 0.85rem;
            border-bottom: 1px solid var(--border);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .code-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .code-stats {
                flex-wrap: wrap;
                gap: 15px;
            }
        }

        /* ØªÙ…ÙŠÙŠØ² Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¬Ù…Ù„Ø© */
        .hljs-keyword { color: #569cd6; }
        .hljs-string { color: #ce9178; }
        .hljs-number { color: #b5cea8; }
        .hljs-comment { color: #6a9955; font-style: italic; }
        .hljs-class { color: #4ec9b0; }
        .hljs-function { color: #dcdcaa; }
        .hljs-annotation { color: #ccc; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
        <header class="header">
            <h1>ğŸ§® ÙƒÙˆØ¯ ØªØ·Ø¨ÙŠÙ‚ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª</h1>
            <p>Ø¹Ø±Ø¶ Ù…Ù†Ø¸Ù… ÙˆÙ…Ø´ÙØ± Ù„Ø£ÙƒÙˆØ§Ø¯ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¬Ø§ÙØ§ Ø§Ù„ÙƒØ§Ù…Ù„</p>
        </header>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="main-content">
            <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h3>ğŸ“‚ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª</h3>
                </div>
                <div class="file-tree">
                    <div class="file-item active" onclick="showCode('main-class')">
                        <span>ğŸ“±</span>
                        <span>CompleteDerivativeApp</span>
                    </div>
                    <div class="file-item" onclick="showCode('math-function')">
                        <span>ğŸ§®</span>
                        <span>AdvancedMathFunction</span>
                    </div>
                    <div class="file-item" onclick="showCode('graph-panel')">
                        <span>ğŸ“ˆ</span>
                        <span>GraphPanel</span>
                    </div>
                </div>
            </div>

            <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ -->
            <div class="code-display">
                <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
                <div class="tabs">
                    <div class="tab active">ğŸ“ Ø§Ù„ÙƒÙˆØ¯</div>
                </div>

                <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙƒÙˆØ¯ -->
                <div class="code-stats">
                    <div class="stat-item">
                        <span>ğŸ“ Ø§Ù„Ø£Ø³Ø·Ø±:</span>
                        <span id="lineCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span>ğŸ“ Ø§Ù„Ù…Ù„Ù:</span>
                        <span id="fileName">CompleteDerivativeApp.java</span>
                    </div>
                    <div class="stat-item">
                        <span>ğŸ”— Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª:</span>
                        <span>Swing, AWT</span>
                    </div>
                </div>

                <!-- Ù‡ÙŠØ¯Ø± Ø§Ù„ÙƒÙˆØ¯ -->
                <div class="code-header">
                    <div class="file-info">
                        <div class="file-title" id="currentFile">CompleteDerivativeApp.java</div>
                    </div>
                    <div class="code-actions">
                        <button class="btn btn-primary" onclick="copyCode()">
                            ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯
                        </button>
                    </div>
                </div>

                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒÙˆØ¯ -->
                <div class="code-area">
                    <pre><code class="language-java" id="code-content">// Ø§Ø®ØªØ± Ù…Ù„ÙØ§Ù‹ Ù…Ù† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ¯</code></pre>
                </div>
            </div>
        </div>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ -->
        <div class="project-info">
            <h3>ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
            <div class="info-grid">
                <div class="info-card">
                    <h4>ğŸ¯ Ø§Ù„ÙˆØµÙ</h4>
                    <p>ØªØ·Ø¨ÙŠÙ‚ Ø±Ø³ÙˆÙ…ÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª ÙˆØ¯Ø±Ø§Ø³Ø© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ø¬Ù‡Ø© Swing ÙÙŠ Ø¬Ø§ÙØ§.</p>
                </div>
                <div class="info-card">
                    <h4>âš™ï¸ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª</h4>
                    <p>Java Swing â€¢ AWT Graphics â€¢ Math Parsing â€¢ GUI Design</p>
                </div>
                <div class="info-card">
                    <h4>ğŸ“¦ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª</h4>
                    <p>ÙˆØ§Ø¬Ù‡Ø© Ø±Ø³ÙˆÙ…ÙŠØ© â€¢ Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ â€¢ Ø­Ø³Ø§Ø¨ Ù…Ø´ØªÙ‚Ø§Øª â€¢ Ø¯Ø±Ø§Ø³Ø© Ø¯ÙˆØ§Ù„</p>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„ÙÙˆØªØ± -->
        <footer class="footer">
            <p>ğŸš€ Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© - ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª</p>
        </footer>
    </div>

    <!-- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø£ÙƒÙˆØ§Ø¯ -->
    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„ÙƒØ§Ù…Ù„Ø©
        const codeFiles = {
            'main-class': {
                name: 'CompleteDerivativeApp.java',
                content: `import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.util.*;
import java.util.List;
import java.util.regex.*;

public class CompleteDerivativeApp extends JFrame {
    private JTextField functionField;
    private JTextField domainStartField;
    private JTextField domainEndField;
    private JTextField pointField;
    private JTextArea resultArea;
    private JButton calcDerivativeAtPointBtn;
    private JButton calcDerivativeFunctionBtn;
    private JButton studyBehaviorBtn;
    private JButton boundFunctionBtn;
    private JButton plotGraphBtn;
    private GraphPanel graphPanel;
    private JComboBox<String> functionExamples;

    public CompleteDerivativeApp() {
        initializeUI();
        setupEventListeners();
    }

    private void initializeUI() {
        setTitle("ğŸ§® Advanced Derivative Analyzer - Ù…Ø­Ù„Ù„ Ø§Ù„Ù…Ø´ØªÙ‚Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(1400, 900);
        setLocationRelativeTo(null);
        
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeel());
        } catch (Exception e) {
            e.printStackTrace();
        }

        createInputPanel();
        createButtonPanel();
        createResultPanel();
        createGraphPanel();
        setupMainLayout();
    }

    private void createInputPanel() {
        JPanel inputPanel = new JPanel(new GridBagLayout());
        inputPanel.setBorder(BorderFactory.createTitledBorder(
            BorderFactory.createLineBorder(new Color(70, 130, 180), 2),
            "ğŸ“ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
            TitledBorder.RIGHT,
            TitledBorder.TOP,
            new Font("Arial", Font.BOLD, 14),
            new Color(70, 130, 180)
        ));
        inputPanel.setBackground(Color.WHITE);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(10, 10, 10, 10);
        gbc.fill = GridBagConstraints.HORIZONTAL;

        // Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø¯ÙˆØ§Ù„
        gbc.gridx = 0; gbc.gridy = 0;
        inputPanel.add(createLabel("Ø£Ù…Ø«Ù„Ø© Ø³Ø±ÙŠØ¹Ø©:"), gbc);
        
        gbc.gridx = 1; gbc.gridy = 0; gbc.weightx = 1.0;
        String[] examples = {
            "x^2", "x^3", "sin(x)", "cos(x)", "exp(x)", "ln(x)",
            "x^2 + sin(x)", "x^3 - 3*x", "sin(x)*cos(x)", 
            "x^2 + 2*x + 1", "1/x", "sqrt(x)", "tan(x)"
        };
        functionExamples = new JComboBox<>(examples);
        functionExamples.setFont(new Font("Arial", Font.PLAIN, 12));
        functionExamples.addActionListener(e -> {
            functionField.setText(functionExamples.getSelectedItem().toString());
        });
        inputPanel.add(functionExamples, gbc);

        // Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¯Ø§Ù„Ø©
        gbc.gridx = 0; gbc.gridy = 1;
        inputPanel.add(createLabel("Ø§Ù„Ø¯Ø§Ù„Ø© f(x):"), gbc);
        
        gbc.gridx = 1; gbc.gridy = 1;
        functionField = createStyledTextField("x^2");
        inputPanel.add(functionField, gbc);

        // Ù…Ø¬Ø§Ù„ ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¯Ø§Ù„Ø©
        gbc.gridx = 0; gbc.gridy = 2;
        inputPanel.add(createLabel("Ù…Ø¬Ø§Ù„ Ø§Ù„ØªØ¹Ø±ÙŠÙ:"), gbc);
        
        JPanel domainPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT, 5, 0));
        domainPanel.setBackground(Color.WHITE);
        domainPanel.add(createLabel("Ù…Ù†"));
        domainStartField = createStyledTextField("-5");
        domainStartField.setColumns(8);
        domainPanel.add(domainStartField);
        domainPanel.add(createLabel("Ø¥Ù„Ù‰"));
        domainEndField = createStyledTextField("5");
        domainEndField.setColumns(8);
        domainPanel.add(domainEndField);
        
        gbc.gridx = 1; gbc.gridy = 2;
        inputPanel.add(domainPanel, gbc);

        // Ù†Ù‚Ø·Ø© x0
        gbc.gridx = 0; gbc.gridy = 3;
        inputPanel.add(createLabel("Ø§Ù„Ù†Ù‚Ø·Ø© xâ‚€:"), gbc);
        
        gbc.gridx = 1; gbc.gridy = 3;
        pointField = createStyledTextField("2");
        pointField.setColumns(10);
        inputPanel.add(pointField, gbc);

        add(inputPanel, BorderLayout.NORTH);
    }

    private void createButtonPanel() {
        JPanel buttonPanel = new JPanel(new GridLayout(1, 5, 10, 0));
        buttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 20, 10, 20));
        buttonPanel.setBackground(new Color(240, 245, 255));

        calcDerivativeAtPointBtn = createModernButton("ğŸ” Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø¹Ù†Ø¯ Ù†Ù‚Ø·Ø©", new Color(41, 128, 185));
        calcDerivativeFunctionBtn = createModernButton("ğŸ“ Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„Ø¯Ø§Ù„Ø©", new Color(39, 174, 96));
        studyBehaviorBtn = createModernButton("ğŸ“ˆ Ø¯Ø±Ø§Ø³Ø© Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØªØºÙŠØ±", new Color(230, 126, 34));
        boundFunctionBtn = createModernButton("ğŸ“Š Ø­ØµØ± Ø§Ù„Ø¯Ø§Ù„Ø©", new Color(155, 89, 182));
        plotGraphBtn = createModernButton("ğŸ¨ ØªÙ…Ø«ÙŠÙ„ Ø¨ÙŠØ§Ù†ÙŠ", new Color(231, 76, 60));

        buttonPanel.add(calcDerivativeAtPointBtn);
        buttonPanel.add(calcDerivativeFunctionBtn);
        buttonPanel.add(studyBehaviorBtn);
        buttonPanel.add(boundFunctionBtn);
        buttonPanel.add(plotGraphBtn);

        add(buttonPanel, BorderLayout.CENTER);
    }

    private void createResultPanel() {
        JPanel resultPanel = new JPanel(new BorderLayout());
        resultPanel.setBorder(BorderFactory.createTitledBorder(
            BorderFactory.createLineBorder(new Color(46, 204, 113), 2),
            "ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„",
            TitledBorder.RIGHT,
            TitledBorder.TOP,
            new Font("Arial", Font.BOLD, 14),
            new Color(46, 204, 113)
        ));
        resultPanel.setBackground(Color.WHITE);

        resultArea = new JTextArea(8, 50);
        resultArea.setEditable(false);
        resultArea.setFont(new Font("Arial", Font.PLAIN, 13));
        resultArea.setBackground(new Color(253, 253, 253));
        resultArea.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        
        JScrollPane scrollPane = new JScrollPane(resultArea);
        scrollPane.setBorder(BorderFactory.createEmptyBorder());
        
        resultPanel.add(scrollPane, BorderLayout.CENTER);
        add(resultPanel, BorderLayout.SOUTH);
    }

    private void createGraphPanel() {
        graphPanel = new GraphPanel();
        JPanel graphContainer = new JPanel(new BorderLayout());
        graphContainer.setBorder(BorderFactory.createTitledBorder(
            BorderFactory.createLineBorder(new Color(142, 68, 173), 2),
            "ğŸ“ˆ Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø¹Ù„Ù‰ Ù…Ø¹Ù„Ù… Ù…ØªØ¹Ø§Ù…Ø¯ Ù…ØªØ¬Ø§Ù†Ø³",
            TitledBorder.RIGHT,
            TitledBorder.TOP,
            new Font("Arial", Font.BOLD, 14),
            new Color(142, 68, 173)
        ));
        graphContainer.setBackground(Color.WHITE);
        graphContainer.add(graphPanel, BorderLayout.CENTER);
        
        add(graphContainer, BorderLayout.EAST);
    }

    private void setupMainLayout() {
        JSplitPane mainSplit = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
        mainSplit.setDividerLocation(500);
        
        JPanel topPanel = new JPanel(new BorderLayout());
        topPanel.add(getContentPane().getComponent(0), BorderLayout.NORTH);
        topPanel.add(getContentPane().getComponent(1), BorderLayout.CENTER);
        
        JPanel bottomPanel = new JPanel(new BorderLayout());
        bottomPanel.add(getContentPane().getComponent(3), BorderLayout.CENTER);
        bottomPanel.add(getContentPane().getComponent(2), BorderLayout.SOUTH);
        
        mainSplit.setTopComponent(topPanel);
        mainSplit.setBottomComponent(bottomPanel);
        
        getContentPane().removeAll();
        getContentPane().add(mainSplit, BorderLayout.CENTER);
    }

    private JLabel createLabel(String text) {
        JLabel label = new JLabel(text);
        label.setFont(new Font("Arial", Font.BOLD, 13));
        label.setForeground(new Color(60, 60, 60));
        return label;
    }

    private JTextField createStyledTextField(String placeholder) {
        JTextField field = new JTextField(20);
        field.setText(placeholder);
        field.setFont(new Font("Arial", Font.PLAIN, 13));
        field.setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createLineBorder(new Color(200, 200, 200), 1),
            BorderFactory.createEmptyBorder(8, 10, 8, 10)
        ));
        field.setBackground(Color.WHITE);
        return field;
    }

    private JButton createModernButton(String text, Color color) {
        JButton button = new JButton(text);
        button.setFont(new Font("Arial", Font.BOLD, 12));
        button.setBackground(color);
        button.setForeground(Color.WHITE);
        button.setFocusPainted(false);
        button.setBorder(BorderFactory.createEmptyBorder(12, 15, 12, 15));
        button.setCursor(new Cursor(Cursor.HAND_CURSOR));
        
        button.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseEntered(MouseEvent e) {
                button.setBackground(color.darker());
            }
            
            @Override
            public void mouseExited(MouseEvent e) {
                button.setBackground(color);
            }
        });
        
        return button;
    }

    private void setupEventListeners() {
        calcDerivativeAtPointBtn.addActionListener(e -> calculateDerivativeAtPoint());
        calcDerivativeFunctionBtn.addActionListener(e -> calculateDerivativeFunction());
        studyBehaviorBtn.addActionListener(e -> studyFunctionBehavior());
        boundFunctionBtn.addActionListener(e -> boundFunction());
        plotGraphBtn.addActionListener(e -> plotGraph());
    }

    private void calculateDerivativeAtPoint() {
        try {
            String functionStr = functionField.getText();
            double x0 = Double.parseDouble(pointField.getText());
            
            AdvancedMathFunction function = new AdvancedMathFunction(functionStr);
            double derivative = function.derivativeAt(x0);
            double functionValue = function.evaluate(x0);
            
            String symbolicDeriv = function.symbolicDerivative();
            
            String result = String.format(
                "ğŸ¯ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø¹Ù†Ø¯ Ù†Ù‚Ø·Ø©:\\n" +
                "=====================\\n" +
                "Ø§Ù„Ø¯Ø§Ù„Ø©: f(x) = %s\\n" +
                "Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©: f'(x) = %s\\n" +
                "Ø§Ù„Ù†Ù‚Ø·Ø©: xâ‚€ = %.4f\\n" +
                "Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯Ø§Ù„Ø©: f(%.4f) = %.6f\\n" +
                "Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø§Ù„Ø¹Ø¯Ø¯ÙŠØ©: f'(%.4f) = %.6f\\n" +
                "Ø§Ù„ØªÙØ³ÙŠØ±: Ù…ÙŠÙ„ Ø§Ù„Ù…Ù…Ø§Ø³ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© Ù‡Ùˆ %.6f",
                functionStr, symbolicDeriv, x0, x0, functionValue, x0, derivative, derivative
            );
            
            resultArea.setText(result);
            
        } catch (Exception ex) {
            showError("Ø®Ø·Ø£ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø´ØªÙ‚Ø©: " + ex.getMessage());
        }
    }

    private void calculateDerivativeFunction() {
        try {
            String functionStr = functionField.getText();
            AdvancedMathFunction function = new AdvancedMathFunction(functionStr);
            
            double start = Double.parseDouble(domainStartField.getText());
            double end = Double.parseDouble(domainEndField.getText());
            
            String symbolicDeriv = function.symbolicDerivative();
            
            StringBuilder result = new StringBuilder();
            result.append("ğŸ“ Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„Ø¯Ø§Ù„Ø©:\\n");
            result.append("================\\n");
            result.append("Ø§Ù„Ø¯Ø§Ù„Ø©: f(x) = ").append(functionStr).append("\\n");
            result.append("Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø§Ù„Ø±Ù…Ø²ÙŠØ©: f'(x) = ").append(symbolicDeriv).append("\\n\\n");
            result.append("Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:\\n");
            result.append(function.getDerivationRules()).append("\\n");
            result.append("Ù‚ÙŠÙ… Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¬Ø§Ù„:\\n");
            
            int samples = 10;
            double step = (end - start) / samples;
            
            for (int i = 0; i <= samples; i++) {
                double x = start + i * step;
                double derivative = function.derivativeAt(x);
                result.append(String.format("f'(%.2f) = %8.4f\\n", x, derivative));
            }
            
            resultArea.setText(result.toString());
            
        } catch (Exception ex) {
            showError("Ø®Ø·Ø£ ÙÙŠ Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„Ø¯Ø§Ù„Ø©: " + ex.getMessage());
        }
    }

    private void studyFunctionBehavior() {
        try {
            String functionStr = functionField.getText();
            double start = Double.parseDouble(domainStartField.getText());
            double end = Double.parseDouble(domainEndField.getText());
            
            AdvancedMathFunction function = new AdvancedMathFunction(functionStr);
            
            StringBuilder result = new StringBuilder();
            result.append("ğŸ“ˆ Ø¯Ø±Ø§Ø³Ø© Ø§ØªØ¬Ø§Ù‡ ØªØºÙŠØ± Ø§Ù„Ø¯Ø§Ù„Ø©:\\n");
            result.append("=========================\\n");
            result.append("Ø§Ù„Ø¯Ø§Ù„Ø©: f(x) = ").append(functionStr).append("\\n");
            result.append("Ø§Ù„Ù…Ø´ØªÙ‚Ø©: f'(x) = ").append(function.symbolicDerivative()).append("\\n");
            result.append("Ø§Ù„Ù…Ø¬Ø§Ù„: [").append(start).append(", ").append(end).append("]\\n\\n");
            
            List<Double> criticalPoints = new ArrayList<>();
            int intervals = 20;
            double step = (end - start) / intervals;
            
            result.append("Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ:\\n");
            result.append("-----------------\\n");
            
            for (int i = 0; i <= intervals; i++) {
                double x = start + i * step;
                double derivative = function.derivativeAt(x);
                String behavior = getBehaviorDescription(derivative);
                
                result.append(String.format("x = %6.2f: f'(x) = %8.4f â†’ %s\\n", 
                    x, derivative, behavior));
                
                if (Math.abs(derivative) < 1e-5) {
                    criticalPoints.add(x);
                }
            }
            
            if (!criticalPoints.isEmpty()) {
                result.append("\\nğŸ¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø±Ø¬Ø©:\\n");
                for (double point : criticalPoints) {
                    double secondDeriv = function.secondDerivativeAt(point);
                    String pointType = classifyCriticalPoint(function, point);
                    result.append(String.format("â€¢ x = %.3f: %s (f'' = %.3f)\\n", 
                        point, pointType, secondDeriv));
                }
            }
            
            resultArea.setText(result.toString());
            
        } catch (Exception ex) {
            showError("Ø®Ø·Ø£ ÙÙŠ Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø§ØªØ¬Ø§Ù‡: " + ex.getMessage());
        }
    }

    private void boundFunction() {
        try {
            String functionStr = functionField.getText();
            double start = Double.parseDouble(domainStartField.getText());
            double end = Double.parseDouble(domainEndField.getText());
            
            AdvancedMathFunction function = new AdvancedMathFunction(functionStr);
            
            double minVal = Double.MAX_VALUE;
            double maxVal = -Double.MAX_VALUE;
            double minX = start, maxX = start;
            
            int samples = 1000;
            double step = (end - start) / samples;
            
            for (int i = 0; i <= samples; i++) {
                double x = start + i * step;
                double y = function.evaluate(x);
                
                if (y < minVal) {
                    minVal = y;
                    minX = x;
                }
                if (y > maxVal) {
                    maxVal = y;
                    maxX = x;
                }
            }
            
            String result = String.format(
                "ğŸ“Š Ø­ØµØ± Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¬Ø§Ù„:\\n" +
                "======================\\n" +
                "Ø§Ù„Ø¯Ø§Ù„Ø©: f(x) = %s\\n" +
                "Ø§Ù„Ù…Ø´ØªÙ‚Ø©: f'(x) = %s\\n" +
                "Ø§Ù„Ù…Ø¬Ø§Ù„: [%.2f, %.2f]\\n\\n" +
                "ğŸ¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:\\n" +
                "â€¢ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØµØºØ±Ù‰: f(%.4f) = %.4f\\n" +
                "â€¢ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ø¸Ù…Ù‰: f(%.4f) = %.4f\\n" +
                "â€¢ Ù…Ø¯Ù‰ Ø§Ù„Ø¯Ø§Ù„Ø©: [%.4f, %.4f]\\n\\n" +
                "ğŸ“ Ø§Ù„ØªØ­Ù„ÙŠÙ„:\\n" +
                "â€¢ Ø§Ù„Ø¯Ø§Ù„Ø© Ù…Ø­Ø¯ÙˆØ¯Ø© Ø¨ÙŠÙ† %.4f Ùˆ %.4f\\n" +
                "â€¢ Ù…Ø¬Ø§Ù„ Ø§Ù„Ù‚ÙŠÙ…: [%.4f, %.4f]",
                functionStr, function.symbolicDerivative(), start, end,
                minX, minVal, maxX, maxVal,
                minVal, maxVal,
                minVal, maxVal, minVal, maxVal
            );
            
            resultArea.setText(result);
            
        } catch (Exception ex) {
            showError("Ø®Ø·Ø£ ÙÙŠ Ø­ØµØ± Ø§Ù„Ø¯Ø§Ù„Ø©: " + ex.getMessage());
        }
    }

    private void plotGraph() {
        try {
            String functionStr = functionField.getText();
            double start = Double.parseDouble(domainStartField.getText());
            double end = Double.parseDouble(domainEndField.getText());
            
            AdvancedMathFunction function = new AdvancedMathFunction(functionStr);
            graphPanel.plotFunction(function, start, end);
            
            resultArea.setText("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø¨Ù†Ø¬Ø§Ø­!\\n" +
                             "â€¢ Ø§Ù„Ø¯Ø§Ù„Ø©: " + functionStr + "\\n" +
                             "â€¢ Ø§Ù„Ù…Ø´ØªÙ‚Ø©: " + function.symbolicDerivative() + "\\n" +
                             "â€¢ Ø§Ù„Ù…Ø¬Ø§Ù„: [" + start + ", " + end + "]\\n" +
                             "â€¢ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø£ÙÙ‚ÙŠ: Ù‚ÙŠÙ… x\\n" +
                             "â€¢ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ: Ù‚ÙŠÙ… f(x) Ùˆ f'(x)");
            
        } catch (Exception ex) {
            showError("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ: " + ex.getMessage());
        }
    }

    private String getBehaviorDescription(double derivative) {
        if (Math.abs(derivative) < 1e-8) {
            return "ğŸ“Œ Ù†Ù‚Ø·Ø© Ø­Ø±Ø¬Ø©";
        } else if (derivative > 0) {
            return "ğŸ“ˆ ØªØ²Ø§ÙŠØ¯ÙŠØ©";
        } else {
            return "ğŸ“‰ ØªÙ†Ø§Ù‚ØµÙŠØ©";
        }
    }

    private String classifyCriticalPoint(AdvancedMathFunction function, double point) {
        double secondDeriv = function.secondDerivativeAt(point);
        
        if (secondDeriv > 0) {
            return "ğŸ“ ØµØºØ±Ù‰ Ù…Ø­Ù„ÙŠØ©";
        } else if (secondDeriv < 0) {
            return "ğŸ”ï¸ Ø¹Ø¸Ù…Ù‰ Ù…Ø­Ù„ÙŠØ©";
        } else {
            return "ğŸ”„ Ù†Ù‚Ø·Ø© Ø§Ù†Ù‚Ù„Ø§Ø¨";
        }
    }

    private void showError(String message) {
        JOptionPane.showMessageDialog(this, message, "Ø®Ø·Ø£", JOptionPane.ERROR_MESSAGE);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            new CompleteDerivativeApp().setVisible(true);
        });
    }
}`
            },
            'math-function': {
                name: 'AdvancedMathFunction.java',
                content: `// ğŸ§® Ù…Ø­Ø±Ùƒ Ø§Ù„Ø§Ø´ØªÙ‚Ø§Ù‚ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„
class AdvancedMathFunction {
    private String expression;
    
    public AdvancedMathFunction(String expression) {
        this.expression = expression.replace(" ", "").toLowerCase();
    }
    
    public double evaluate(double x) {
        return evaluateExpression(expression, x);
    }
    
    public double derivativeAt(double x) {
        double h = 1e-8;
        return (evaluate(x + h) - evaluate(x - h)) / (2 * h);
    }
    
    public double secondDerivativeAt(double x) {
        double h = 1e-6;
        return (evaluate(x + h) - 2 * evaluate(x) + evaluate(x - h)) / (h * h);
    }
    
    public String symbolicDerivative() {
        return deriveSymbolically(expression);
    }
    
    public String getDerivationRules() {
        return analyzeDerivationRules(expression);
    }
    
    private double evaluateExpression(String expr, double x) {
        try {
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ù‚ÙˆØ§Ø³ Ø£ÙˆÙ„Ø§Ù‹
            while (expr.contains("(") && expr.contains(")")) {
                Pattern pattern = Pattern.compile("(\\\\([^()]+\\\\))");
                Matcher matcher = pattern.matcher(expr);
                if (matcher.find()) {
                    String group = matcher.group(1);
                    String inner = group.substring(1, group.length() - 1);
                    double value = evaluateExpression(inner, x);
                    expr = expr.replace(group, String.valueOf(value));
                } else {
                    break;
                }
            }
            
            // Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ©
            if (expr.contains("+")) {
                String[] parts = splitByOperator(expr, "\\\\+");
                return evaluateExpression(parts[0], x) + evaluateExpression(parts[1], x);
            }
            if (expr.contains("-") && !expr.startsWith("-")) {
                String[] parts = splitByOperator(expr, "-");
                return evaluateExpression(parts[0], x) - evaluateExpression(parts[1], x);
            }
            if (expr.contains("*")) {
                String[] parts = splitByOperator(expr, "\\\\*");
                return evaluateExpression(parts[0], x) * evaluateExpression(parts[1], x);
            }
            if (expr.contains("/")) {
                String[] parts = splitByOperator(expr, "/");
                return evaluateExpression(parts[0], x) / evaluateExpression(parts[1], x);
            }
            if (expr.contains("^")) {
                String[] parts = splitByOperator(expr, "\\\\^");
                return Math.pow(evaluateExpression(parts[0], x), evaluateExpression(parts[1], x));
            }
            
            // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø«Ù„Ø«ÙŠØ© ÙˆØ§Ù„Ø£Ø³ÙŠØ©
            if (expr.startsWith("sin(")) {
                String arg = expr.substring(4, expr.length() - 1);
                return Math.sin(evaluateExpression(arg, x));
            }
            if (expr.startsWith("cos(")) {
                String arg = expr.substring(4, expr.length() - 1);
                return Math.cos(evaluateExpression(arg, x));
            }
            if (expr.startsWith("tan(")) {
                String arg = expr.substring(4, expr.length() - 1);
                return Math.tan(evaluateExpression(arg, x));
            }
            if (expr.startsWith("exp(")) {
                String arg = expr.substring(4, expr.length() - 1);
                return Math.exp(evaluateExpression(arg, x));
            }
            if (expr.startsWith("ln(")) {
                String arg = expr.substring(3, expr.length() - 1);
                return Math.log(evaluateExpression(arg, x));
            }
            if (expr.startsWith("log(")) {
                String arg = expr.substring(4, expr.length() - 1);
                return Math.log10(evaluateExpression(arg, x));
            }
            if (expr.startsWith("sqrt(")) {
                String arg = expr.substring(5, expr.length() - 1);
                return Math.sqrt(evaluateExpression(arg, x));
            }
            
            // Ø§Ù„Ø«ÙˆØ§Ø¨Øª ÙˆØ§Ù„Ù…ØªØºÙŠØ±Ø§Øª
            if (expr.equals("x")) return x;
            if (expr.equals("e")) return Math.E;
            if (expr.equals("pi")) return Math.PI;
            
            // Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯
            return Double.parseDouble(expr);
            
        } catch (Exception e) {
            throw new RuntimeException("Ø®Ø·Ø£ ÙÙŠ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªØ¹Ø¨ÙŠØ±: " + expr + " - " + e.getMessage());
        }
    }
    
    private String deriveSymbolically(String expr) {
        // Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù‚ÙˆØ©: x^n
        if (expr.matches("x\\\\^\\\\d+")) {
            int n = Integer.parseInt(expr.substring(2));
            return n + "*x^" + (n-1);
        }
        
        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø«Ù„Ø«ÙŠØ©
        if (expr.equals("sin(x)")) return "cos(x)";
        if (expr.equals("cos(x)")) return "-sin(x)";
        if (expr.equals("tan(x)")) return "1/cos(x)^2";
        
        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³ÙŠØ© ÙˆØ§Ù„Ù„ÙˆØºØ§Ø±ÙŠØªÙ…ÙŠØ©
        if (expr.equals("exp(x)")) return "exp(x)";
        if (expr.equals("ln(x)")) return "1/x";
        if (expr.equals("log(x)")) return "1/(x*ln(10))";
        
        // Ø§Ù„Ø¬Ù…Ø¹
        if (expr.contains("+")) {
            String[] parts = splitByOperator(expr, "\\\\+");
            return "(" + deriveSymbolically(parts[0]) + " + " + deriveSymbolically(parts[1]) + ")";
        }
        
        // Ø§Ù„Ø·Ø±Ø­
        if (expr.contains("-") && !expr.startsWith("-")) {
            String[] parts = splitByOperator(expr, "-");
            return "(" + deriveSymbolically(parts[0]) + " - " + deriveSymbolically(parts[1]) + ")";
        }
        
        // Ø§Ù„Ø¶Ø±Ø¨
        if (expr.contains("*")) {
            String[] parts = splitByOperator(expr, "\\\\*");
            return "(" + deriveSymbolically(parts[0]) + ")*" + parts[1] + " + " + parts[0] + "*(" + deriveSymbolically(parts[1]) + ")";
        }
        
        // Ø§Ù„Ù‚Ø³Ù…Ø©
        if (expr.contains("/")) {
            String[] parts = splitByOperator(expr, "/");
            return "((" + deriveSymbolically(parts[0]) + ")*" + parts[1] + " - " + parts[0] + "*(" + deriveSymbolically(parts[1]) + "))/(" + parts[1] + ")^2";
        }
        
        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
        if (expr.startsWith("sin(") && !expr.equals("sin(x)")) {
            String inner = expr.substring(4, expr.length() - 1);
            return "cos(" + inner + ")*(" + deriveSymbolically(inner) + ")";
        }
        if (expr.startsWith("cos(") && !expr.equals("cos(x)")) {
            String inner = expr.substring(4, expr.length() - 1);
            return "-sin(" + inner + ")*(" + deriveSymbolically(inner) + ")";
        }
        if (expr.startsWith("exp(") && !expr.equals("exp(x)")) {
            String inner = expr.substring(4, expr.length() - 1);
            return "exp(" + inner + ")*(" + deriveSymbolically(inner) + ")";
        }
        if (expr.startsWith("ln(") && !expr.equals("ln(x)")) {
            String inner = expr.substring(3, expr.length() - 1);
            return "(1/(" + inner + "))*(" + deriveSymbolically(inner) + ")";
        }
        
        // Ø§Ù„Ø«ÙˆØ§Ø¨Øª
        if (isConstant(expr)) {
            return "0";
        }
        
        return "0"; // Ù…Ø´ØªÙ‚Ø© Ø§Ù„Ø«ÙˆØ§Ø¨Øª
    }
    
    private String analyzeDerivationRules(String expr) {
        StringBuilder rules = new StringBuilder();
        
        if (expr.matches("x\\\\^\\\\d+")) {
            rules.append("â€¢ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù‚ÙˆØ©: (x^n)' = n*x^(n-1)\\n");
        }
        if (expr.contains("sin(")) {
            rules.append("â€¢ Ù…Ø´ØªÙ‚Ø© sin(x): (sin(x))' = cos(x)\\n");
        }
        if (expr.contains("cos(")) {
            rules.append("â€¢ Ù…Ø´ØªÙ‚Ø© cos(x): (cos(x))' = -sin(x)\\n");
        }
        if (expr.contains("exp(")) {
            rules.append("â€¢ Ù…Ø´ØªÙ‚Ø© exp(x): (exp(x))' = exp(x)\\n");
        }
        if (expr.contains("ln(")) {
            rules.append("â€¢ Ù…Ø´ØªÙ‚Ø© ln(x): (ln(x))' = 1/x\\n");
        }
        if (expr.contains("+")) {
            rules.append("â€¢ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¬Ù…Ø¹: (u+v)' = u' + v'\\n");
        }
        if (expr.contains("-") && !expr.startsWith("-")) {
            rules.append("â€¢ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø·Ø±Ø­: (u-v)' = u' - v'\\n");
        }
        if (expr.contains("*")) {
            rules.append("â€¢ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¶Ø±Ø¨: (u*v)' = u'v + uv'\\n");
        }
        if (expr.contains("/")) {
            rules.append("â€¢ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù‚Ø³Ù…Ø©: (u/v)' = (u'v - uv')/vÂ²\\n");
        }
        if (expr.contains("(") && expr.contains(")")) {
            rules.append("â€¢ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø³Ù„Ø³Ù„Ø©: (f(g(x)))' = f'(g(x)) * g'(x)\\n");
        }
        
        return rules.toString();
    }
    
    private String[] splitByOperator(String expr, String operator) {
        // ØªØ¬Ù†Ø¨ ØªÙ‚Ø³ÙŠÙ… Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£Ù‚ÙˆØ§Ø³
        int parenCount = 0;
        for (int i = 0; i < expr.length(); i++) {
            char c = expr.charAt(i);
            if (c == '(') parenCount++;
            else if (c == ')') parenCount--;
            else if (parenCount == 0 && i > 0) {
                if (operator.equals("\\\\+") && c == '+') {
                    return new String[]{expr.substring(0, i), expr.substring(i + 1)};
                } else if (operator.equals("-") && c == '-') {
                    return new String[]{expr.substring(0, i), expr.substring(i + 1)};
                } else if (operator.equals("\\\\*") && c == '*') {
                    return new String[]{expr.substring(0, i), expr.substring(i + 1)};
                } else if (operator.equals("/") && c == '/') {
                    return new String[]{expr.substring(0, i), expr.substring(i + 1)};
                } else if (operator.equals("\\\\^") && c == '^') {
                    return new String[]{expr.substring(0, i), expr.substring(i + 1)};
                }
            }
        }
        throw new RuntimeException("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ØªØ¹Ø¨ÙŠØ±: " + expr);
    }
    
    private boolean isConstant(String expr) {
        try {
            Double.parseDouble(expr);
            return true;
        } catch (NumberFormatException e) {
            return expr.equals("e") || expr.equals("pi");
        }
    }
}`
            },
            'graph-panel': {
                name: 'GraphPanel.java',
                content: `// ğŸ“ˆ Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
class GraphPanel extends JPanel {
    private List<Point2D.Double> functionPoints;
    private List<Point2D.Double> derivativePoints;
    private double minX, maxX, minY, maxY;
    private boolean hasData;

    public GraphPanel() {
        functionPoints = new ArrayList<>();
        derivativePoints = new ArrayList<>();
        hasData = false;
        setBackground(Color.WHITE);
        setPreferredSize(new Dimension(600, 400));
    }

    public void plotFunction(AdvancedMathFunction function, double start, double end) {
        functionPoints.clear();
        derivativePoints.clear();
        
        minX = start;
        maxX = end;
        minY = Double.MAX_VALUE;
        maxY = -Double.MAX_VALUE;

        int points = 500;
        double step = (end - start) / points;

        for (int i = 0; i <= points; i++) {
            double x = start + i * step;
            try {
                double y = function.evaluate(x);
                double dy = function.derivativeAt(x);

                functionPoints.add(new Point2D.Double(x, y));
                derivativePoints.add(new Point2D.Double(x, dy));

                minY = Math.min(minY, Math.min(y, dy));
                maxY = Math.max(maxY, Math.max(y, dy));

            } catch (Exception e) {
                // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· ØºÙŠØ± Ø§Ù„Ù…Ø¹Ø±ÙØ©
            }
        }

        double yRange = maxY - minY;
        minY -= yRange * 0.1;
        maxY += yRange * 0.1;

        hasData = true;
        repaint();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        if (hasData) {
            drawCoordinateSystem(g2d);
            drawFunction(g2d, functionPoints, new Color(41, 128, 185), "f(x)");
            drawFunction(g2d, derivativePoints, new Color(231, 76, 60), "f'(x)");
            drawLegend(g2d);
        } else {
            drawWelcomeMessage(g2d);
        }
    }

    private void drawCoordinateSystem(Graphics2D g2d) {
        int width = getWidth();
        int height = getHeight();
        int padding = 50;

        // Ø±Ø³Ù… Ø§Ù„Ø´Ø¨ÙƒØ©
        g2d.setColor(new Color(240, 240, 240));
        for (int i = padding; i < width - padding; i += 40) {
            g2d.drawLine(i, padding, i, height - padding);
        }
        for (int i = padding; i < height - padding; i += 40) {
            g2d.drawLine(padding, i, width - padding, i);
        }

        // Ø§Ù„Ù…Ø­ÙˆØ± X
        g2d.setColor(Color.BLACK);
        g2d.setStroke(new BasicStroke(2));
        int xAxisY = height - padding;
        g2d.drawLine(padding, xAxisY, width - padding, xAxisY);

        // Ø§Ù„Ù…Ø­ÙˆØ± Y
        int yAxisX = padding;
        g2d.drawLine(yAxisX, padding, yAxisX, height - padding);

        // ØªØ³Ù…ÙŠØ© Ø§Ù„Ù…Ø­Ø§ÙˆØ±
        g2d.setFont(new Font("Arial", Font.BOLD, 12));
        g2d.drawString("Ø§Ù„Ù…Ø­ÙˆØ± X", width - 40, xAxisY - 5);
        g2d.drawString("Ø§Ù„Ù…Ø­ÙˆØ± Y", yAxisX + 5, padding + 15);

        // ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª
        drawAxisLabels(g2d);
    }

    private void drawAxisLabels(Graphics2D g2d) {
        int width = getWidth();
        int height = getHeight();
        int padding = 50;

        g2d.setColor(Color.GRAY);
        g2d.setFont(new Font("Arial", Font.PLAIN, 10));

        // Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø­ÙˆØ± X
        for (double x = Math.ceil(minX); x <= maxX; x++) {
            if (Math.abs(x) < 1e-10) x = 0;
            int xPixel = padding + (int)((x - minX) / (maxX - minX) * (width - 2 * padding));
            g2d.drawString(String.format("%.1f", x), xPixel - 10, height - padding + 15);
            g2d.drawLine(xPixel, height - padding - 3, xPixel, height - padding + 3);
        }

        // Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø­ÙˆØ± Y
        for (double y = Math.ceil(minY); y <= maxY; y++) {
            if (Math.abs(y) < 1e-10) y = 0;
            int yPixel = height - padding - (int)((y - minY) / (maxY - minY) * (height - 2 * padding));
            g2d.drawString(String.format("%.1f", y), padding - 25, yPixel + 4);
            g2d.drawLine(padding - 3, yPixel, padding + 3, yPixel);
        }
    }

    private void drawFunction(Graphics2D g2d, List<Point2D.Double> points, Color color, String label) {
        if (points.isEmpty()) return;

        int width = getWidth();
        int height = getHeight();
        int padding = 50;

        g2d.setColor(color);
        g2d.setStroke(new BasicStroke(2.5f));

        Path2D path = new Path2D.Double();
        boolean first = true;

        for (Point2D.Double p : points) {
            int x = padding + (int)((p.x - minX) / (maxX - minX) * (width - 2 * padding));
            int y = height - padding - (int)((p.y - minY) / (maxY - minY) * (height - 2 * padding));

            if (first) {
                path.moveTo(x, y);
                first = false;
            } else {
                path.lineTo(x, y);
            }
        }

        g2d.draw(path);

        // ØªØ³Ù…ÙŠØ© Ø§Ù„Ù…Ù†Ø­Ù†Ù‰
        if (!points.isEmpty()) {
            Point2D.Double last = points.get(points.size() - 1);
            int x = padding + (int)((last.x - minX) / (maxX - minX) * (width - 2 * padding));
            int y = height - padding - (int)((last.y - minY) / (maxY - minY) * (height - 2 * padding));
            
            g2d.setFont(new Font("Arial", Font.BOLD, 12));
            g2d.drawString(label, x + 10, y - 10);
        }
    }

    private void drawLegend(Graphics2D g2d) {
        int x = getWidth() - 150;
        int y = 70;

        g2d.setColor(new Color(41, 128, 185));
        g2d.fillRect(x, y, 20, 3);
        g2d.setColor(Color.BLACK);
        g2d.drawString("Ø§Ù„Ø¯Ø§Ù„Ø© f(x)", x + 30, y + 8);

        g2d.setColor(new Color(231, 76, 60));
        g2d.fillRect(x, y + 20, 20, 3);
        g2d.setColor(Color.BLACK);
        g2d.drawString("Ø§Ù„Ù…Ø´ØªÙ‚Ø© f'(x)", x + 30, y + 28);
    }

    private void drawWelcomeMessage(Graphics2D g2d) {
        int width = getWidth();
        int height = getHeight();

        g2d.setColor(new Color(180, 180, 180));
        g2d.setFont(new Font("Arial", Font.ITALIC, 18));

        String message = "ğŸ¨ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ 'ØªÙ…Ø«ÙŠÙ„ Ø¨ÙŠØ§Ù†ÙŠ' Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù…";
        FontMetrics fm = g2d.getFontMetrics();
        int x = (width - fm.stringWidth(message)) / 2;
        int y = height / 2;

        g2d.drawString(message, x, y);
    }
}`
            }
        };

        // ØªÙ‡ÙŠØ¦Ø© Highlight.js
        hljs.highlightAll();

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¹Ø±Ø¶
        function showCode(fileId) {
            const file = codeFiles[fileId];
            if (!file) return;

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('currentFile').textContent = file.name;
            document.getElementById('fileName').textContent = file.name;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙˆØ¯
            const codeElement = document.getElementById('code-content');
            codeElement.textContent = file.content;
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ…ÙŠÙŠØ² Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¬Ù…Ù„Ø©
            hljs.highlightElement(codeElement);
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø·Ø±
            updateLineCount(file.content);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø´Ø· ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
            updateSidebarActive(fileId);
        }

        function updateLineCount(code) {
            const lines = code.split('\n').length;
            document.getElementById('lineCount').textContent = lines;
        }

        function updateSidebarActive(activeId) {
            // Ø¥Ù„ØºØ§Ø¡ ØªÙ†Ø´ÙŠØ· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
            document.querySelectorAll('.file-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
            event.target.classList.add('active');
        }

        function copyCode() {
            const code = document.getElementById('code-content').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©');
            });
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø±Ø¶ Ø£ÙˆÙ„ Ù…Ù„Ù
        document.addEventListener('DOMContentLoaded', function() {
            showCode('main-class');
        });
    </script>
</body>
</html>